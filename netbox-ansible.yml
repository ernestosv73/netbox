name: netbox
mgmt:
  network: netbox
  ipv4-subnet: 172.80.80.0/24
topology:
  nodes:

    huawei-router:
      kind: huawei_vrp
      mgmt-ipv4: 172.80.80.7
      image: vrnetlab/huawei_vrp:ne40e-8.180
      #startup-config: configs/srlrouter.cfg    

    srlswitch:
      kind: nokia_srlinux
      mgmt-ipv4: 172.80.80.5
      labels:
        graph-icon: switch
      image: ghcr.io/nokia/srlinux:24.10.1
      type: ixrd3
      startup-config: configs/srlswitch.cfg 
    
        
    ansible:
      kind: linux
      image: esanchezv/kali-python3:latest 
      binds:
       - configs/netmiko.sh:/root/netmiko.sh
       - configs/ansible.sh:/root/ansible.sh
       - configs/ansible/automation:/root/automation
      exec:
       - python3 -m pip config set global.break-system-packages true
       - chmod +x /root/netmiko.sh
       - chmod 644 /root/automation/ansible.cfg    
    
    gNMIc:
      kind: linux
      image: esanchezv/hellt-gnmic:latest
      binds:
        - configs/python_scapy.sh:/root/python_scapy.sh
      exec:
         - mkdir /data
         - chmod +x /data
         - chmod +x /root/python_scapy.sh
         - bash /root/python_scapy.sh     

    
    PC3:
      kind: linux
      image: docker.io/esanchezv/kaliipv6:latest  
      #exec:
        #- ip -6 route del default dev eth0    

    PC4:
      kind: linux
      image: docker.io/esanchezv/kaliipv6:latest  
      #exec:
        #- ip -6 route del default dev eth0    
      
  links:
   - endpoints: ["huawei-router:eth1", "srlswitch:e1-1"]  
   - endpoints: ["srlswitch:e1-2", "gNMIc:eth1"]
   - endpoints: ["srlswitch:e1-3", "PC3:eth1"]
   - endpoints: ["srlswitch:e1-4", "PC4:eth1"]   
   - endpoints: ["srlswitch:e1-5", "ansible:eth1"]   
   
    
